<div class="card">
  <header class="card-header">
    <p class="card-header-title">
      <span class="icon"><i class="mdi mdi-book-open-variant-outline"></i></span>
      <%= t('views.ebooks.form_header.files') %>
    </p>
  </header>
  <div class="card-content">
    <div class="field" data-controller="file-input">
      <div class="image w-48 h-48 mx-auto">
        <% if f.object.main_image.attached? %>
          <%= image_tag f.object.main_image_full, class: "rounded-full" %>
        <% else %>
          <%= image_tag 'no-one.png', class: "rounded-full", alt: "missing image" %>
        <% end %>
      </div>
      <%= f.label :main_image, class: "label" %>
      <div class="field-body">
        <div class="field file">
          <label class="upload control">
            <a class="button blue">
              Upload
            </a>
            <%= f.file_field :main_image, class: "input", accept: "image/*",
              data: {  file_input_target: "input", action: "change->file-input#updateFilename" } %>
            <span data-file-input-target="filename" class="ml-2 has-text-grey-dark"></span>
          </label>
        </div>
      </div>
    </div>
    <hr/>
    <div class="field" data-controller="file-input">
      <%= f.label :pdf_file, t("activerecord.attributes.ebook.file_pdf"), class: "label" %>
      <% if f.object.file_pdf.attached? %>
        <div class="mb-2">
          <%= link_to f.object.file_pdf.filename.to_s,
                      url_for(f.object.file_pdf),
                      target: "_blank",
                      rel: "noopener",
                      class: "button is-link is-light"
          %>
        </div>
      <% end %>

      <div class="field-body">
        <div class="field file">
          <label class="upload control">
            <a class="button blue"><%= t('views.ebooks.upload.pdf') %></a>
            <%= f.file_field :file_pdf, class: "input", accept: "application/pdf",
                             data: {  file_input_target: "input", action: "change->file-input#updateFilename" } %>
            <span data-file-input-target="filename" class="ml-2 has-text-grey-dark"></span>
          </label>
        </div>
      </div>
    </div>
    <hr/>
    <div class="field" data-controller="file-input">
      <%= f.label :file_mobi, t("activerecord.attributes.ebook.file_mobi"), class: "label" %>
      <% if f.object.file_mobi.attached? %>
        <div class="mb-2">
          <%= link_to f.object.file_mobi.filename.to_s,
                      url_for(f.object.file_mobi),
                      target: "_blank",
                      rel: "noopener",
                      class: "button is-link is-light" %>
        </div>
      <% end %>

      <div class="field-body">
        <div class="field file">
          <label class="upload control">
            <a class="button blue"><%= t('views.ebooks.upload.mobi') %></a>
            <%= f.file_field :file_mobi, class: "input", accept: ".mobi,application/x-mobipocket-ebook",
              data: {  file_input_target: "input", action: "change->file-input#updateFilename" } %>
            <span data-file-input-target="filename" class="ml-2 has-text-grey-dark"></span>
          </label>
        </div>
      </div>
    </div>
    <hr />
    <div class="field" data-controller="file-input">
      <%= f.label :file_epub, t("activerecord.attributes.ebook.file_epub"), class: "label" %>
      <% if f.object.file_epub.attached? %>
        <div class="mb-2">
          <%= link_to f.object.file_epub.filename.to_s,
                      url_for(f.object.file_epub),
                      target: "_blank",
                      rel: "noopener",
                      class: "button is-link is-light" %>
        </div>
      <% end %>

      <div class="field-body">
        <div class="field file">
          <label class="upload control">
            <a class="button blue"><%= t('views.ebooks.upload.epub') %></a>
            <%= f.file_field :file_epub, class: "input", accept: ".epub,application/epub+zip",
              data: {  file_input_target: "input", action: "change->file-input#updateFilename" } %>
            <span data-file-input-target="filename" class="ml-2 has-text-grey-dark"></span>
          </label>
        </div>
      </div>
    </div>

  </div>
</div>
